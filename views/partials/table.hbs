<div class="table-container">
  <div class="table-container__content">
    <table class='table'>
      <thead class='table__head'>
        <tr>
          <th class='table__cell'>
            Имя
          </th>
          <th class='table__cell'>
            Фамилия
          </th>
          {{#with head}}
          {{#if hasSexColumn}}
          <th class='table__cell'>
            <div class='table__cell-head-content'>
              <span>
                Пол
              </span>
              <div class="table_cell-head-filters">
                <button class='icon' data-popover-id='sex-popover-table'>
                  <i class='icon icon_size_m icon_type_filter'>
                  </i>
                </button>
                <button class="icon" id="sortBySex">
                  <i class="icon icon_size_m icon_type_sort-default">
                </i>
                <input type="hidden" id="sortDirectionSexColumn" value={{sortDirectionSexColumn}}>
                </button>
                <div class='dropdown-menu' data-popover-container-id='sex-popover-table'>
                  <ul>
                    <li>
                      <label>
                        <input type='checkbox' data-filter-sex='male' checked />
                        Мужской
                      </label>
                    </li>
                    <li>
                      <label>
                        <input type='checkbox' data-filter-sex='female' checked />
                        Женский
                      </label>
                    </li>
                  </ul>
                  <button>
                    Применить
                  </button>
                </div>
              </div>

            </div>
          </th>
          {{/if}}

          {{#if hasOpenPageColumn}}
          <th class='table__cell'>
            Страница открыта
          </th>
          {{/if}}
          {{/with}}

        </tr>
      </thead>
      <tbody id='tableBody' class='table__body'>
        {{#is_empty_array rows}}
        <!-- Пока не знаю, как точно colspan определить -->
        <tr class="table__body-empty">
          <td colspan="10">
            Нет данных
          </td>
        </tr>
        {{/is_empty_array}}

        {{#each rows as |rows|}}
        <tr class="table__body-row">
          <td class='table__cell'>
            <div class="table__cell-content">
              <a href={{rows.friend_vk_page_link}} target="_blank" class="table__cell-vk-page-link">
                <i class="icon icon_size_m icon_type_vk-logo">
                </i>
              </a>
              {{rows.first_name}}
            </div>

          </td>
          <td class='table__cell'>
            {{rows.last_name}}
          </td>

          {{#if ../head.hasSexColumn}}
          <td class='table__cell'>
            {{rows.sex_text}}
          </td>
          {{/if}}

          {{#if ../head.hasOpenPageColumn}}
          <td class='table__cell'>
               {{rows.is_open_text}}
          </td>
          {{/if}}

        </tr>
        {{/each}}


      </tbody>
      <!-- 
    Этот скрипт не срабатывает при вставке частичного представления в html...
    <script>
    document.querySelectorAll('thead [data-popover-id]').forEach((triggerElement) => {
      new Popover({
        triggerElement
      })
    })

  </script>-->

    </table>
  </div>


  {{#with pagination}}

  <div class="pagination">
    <input type="hidden" value={{currentPage}} id="currentPage">
    {{#if paginationButtons.buttonPrev}}
    <button class="pagination__button" data-is-prev>
      &lt;
    </button>
    {{/if}}

    {{#each paginationButtons.buttons}}
    {{#if this}}
    <button
      class="pagination__button {{#if_eq this ../../pagination.currentPage}} pagination__button_active {{/if_eq}}">
      {{this}}
    </button>
    {{else}}
    ...
    {{/if}}


    {{/each}}

    {{#if paginationButtons.buttonNext}}
    <button class="pagination__button" data-is-next>
      &gt;
    </button>
    {{/if}}

  </div>

  {{/with}}
</div>